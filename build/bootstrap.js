/*
 * 
 */
Bootstrap=function(){var _bootstrap=null;var _animTarget=null;var _splashDiv=null;var _loaderDiv=null;var _loadedScripts=new Array();var _currentBootSequence=0;var _startTime=null;var _finishTime=null;var _activeX=["MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];var _docMode=document.documentMode;var _ua=navigator.userAgent.toLowerCase();var check=function(r){return r.test(_ua)};var _isOpera=check(/opera/);var _isIE=!_isOpera&&check(/msie/);var _isIE7=_isIE&&((check(/msie 7/)&&_docMode!=8&&_docMode!=9&&_docMode!=10)||_docMode==7);var _isIE8=_isIE&&((check(/msie 8/)&&_docMode!=7&&_docMode!=9&&_docMode!=10)||_docMode==8);var _isIE9=_isIE&&((check(/msie 9/)&&_docMode!=7&&_docMode!=8&&_docMode!=10)||_docMode==9);var _isIE10=_isIE&&((check(/msie 10/)&&_docMode!=7&&_docMode!=8&&_docMode!=9)||_docMode==10);var _isIE6=_isIE&&check(/msie 6/);var _isIE9m=_isIE&&(_isIE6||_isIE7||_isIE8||_isIE9);var createXMLHttpRequest=function(){var http;try{http=new XMLHttpRequest()}catch(e){for(var i=0;i<_activeX.length;++i){try{http=new ActiveXObject(_activeX[i]);break}catch(e){}}}finally{return http}};var requestURL=function(xmlReq,url,cached,callback){if(xmlReq==null){alert("Error loading application. Your browser may not support AJAX.");return}if(!cached){url=url+"?"+new Date().getTime()}xmlReq.onreadystatechange=callback;xmlReq.open("GET",url,true);xmlReq.send(null)};var loadBootstrap=function(bootstrap){if(typeof bootstrap=="object"){_bootstrap=bootstrap;init()}if(typeof bootstrap=="string"){var xmlReq=createXMLHttpRequest();var callback=bootstrapCallback(xmlReq);requestURL(xmlReq,bootstrap,false,callback)}return};var bootstrapCallback=function(xmlReq){return(function(){if(xmlReq.readyState==4){try{_bootstrap=eval("("+xmlReq.responseText+")");init()}catch(e){alert("Error parsing bootstrap configuration. Make sure it is valid JSON.")}}})};var init=function(){try{if(typeof _bootstrap.bootOrder=="undefined"){alert("Error loading application. Bootstrap configuration does not contain a bootOrder property.");return}if(_bootstrap.openerRequired){checkApplicationOpener()}buildAnimTarget();buildSplashScreen();addEventHandlers();window.setTimeout(Bootstrap.loadScripts,250)}catch(e){alert(e)}};var checkApplicationOpener=function(){if(window.location.search==_bootstrap.appOpened){return}try{if(!window.opener){window.location=_bootstrap.launchRedirect}var openerPath=window.opener.location.pathname;var openerScript=openerPath.substring(openerPath.lastIndexOf("/"));if((openerScript=="/"+_bootstrap.openerScript)||(openerScript=="/")){return}else{window.location=_bootstrap.launchRedirect}}catch(e){window.location=_bootstrap.launchRedirect}};var buildAnimTarget=function(){_animTarget=document.createElement("div");_animTarget.setAttribute("id","anim-target");_animTarget.style.top=_bootstrap.animTarget.top;_animTarget.style.left=_bootstrap.animTarget.left;var body=document.getElementById(_bootstrap.bodyTag);body.appendChild(_animTarget)};var buildSplashScreen=function(){_splashDiv=document.createElement("div");_splashDiv.setAttribute("id","splash");setSplashDivStyle();var versionDiv=document.createElement("div");versionDiv.setAttribute("id","splash-version");versionDiv.innerHTML=_bootstrap.versionLabel+" "+_bootstrap.versionNumber;setSplashChildDivStyle(versionDiv,_bootstrap.splash.version);_splashDiv.appendChild(versionDiv);_loaderDiv=document.createElement("div");_loaderDiv.setAttribute("id","splash-loader");setLoaderDivStyle();_splashDiv.appendChild(_loaderDiv);var messageDiv=document.createElement("div");messageDiv.setAttribute("id","splash-message");setSplashChildDivStyle(messageDiv,_bootstrap.splash.message);_splashDiv.appendChild(messageDiv);var copyrightDiv=document.createElement("div");copyrightDiv.setAttribute("id","copyright-message");setSplashChildDivStyle(copyrightDiv,_bootstrap.splash.copyright);_splashDiv.appendChild(copyrightDiv);centerSplashDiv();var body=document.getElementById(_bootstrap.bodyTag);body.appendChild(_splashDiv);Bootstrap.setCopyrightMessage(_bootstrap.copyrightMessage)};var setSplashDivStyle=function(){var splash=_bootstrap.splash;_splashDiv.style.position=splash.position;_splashDiv.style.border=splash.border;_splashDiv.style.background=splash.background;_splashDiv.style.width=splash.width+"px";_splashDiv.style.height=splash.height+"px";_splashDiv.style.zIndex=splash.zIndex};var setLoaderDivStyle=function(){var loader=_bootstrap.splash.loader;_loaderDiv.style.position=loader.position;_loaderDiv.style.top=loader.top;_loaderDiv.style.left=loader.left;_loaderDiv.style.border=loader.border;_loaderDiv.style.background=loader.background;_loaderDiv.style.width=loader.width;_loaderDiv.style.height=loader.height};var setSplashChildDivStyle=function(div,config){div.style.position=config.position;div.style.top=config.top;div.style.left=config.left;div.style.border=config.border;div.style.width=config.width;div.style.fontFamily=config.fontFamily;div.style.fontSize=config.fontSize;div.style.fontWeight=config.fontWeight;div.style.textAlign=config.textAlign;div.style.color=config.color};var centerSplashDiv=function(){var centerTop=(window.innerHeight-_bootstrap.splash.height)/2;var centerLeft=(document.body.clientWidth-_bootstrap.splash.width)/2;_splashDiv.style.left=centerLeft+document.body.scrollLeft+"px";_splashDiv.style.top=centerTop+document.body.scrollTop+"px"};var addEventHandlers=function(){window.onresize=centerSplashDiv};var removeEventHandlers=function(){window.onresize=null};var loadBootGroup=function(name){try{var head=document.getElementsByTagName("head")[0];var bootGroup=fetchBootGroup(name);var now=new Date();bootGroup.startTime=now.getTime();Bootstrap.setSplashMessage((bootGroup.message||"Loading libraries..."));for(var i=0;i<bootGroup.files.length;i++){var script=bootGroup.files[i];var altIEScriptConfig=getAltIEScriptConfig(script);var uri=altIEScriptConfig.ieUri==null?script.uri:altIEScriptConfig.ieUri;var test=altIEScriptConfig.ieTest==null?script.test:altIEScriptConfig.ieTest;var cache=bootGroup.cache;if(typeof script.cache!=="undefined"){cache=script.cache}var element=null;if(bootGroup.type=="js"){element=document.createElement("script");element.setAttribute("type","text/javascript");element.setAttribute("src",(cache?uri:uri+"?"+new Date().getTime()))}if(bootGroup.type=="css"){element=document.createElement("link");element.setAttribute("type","text/css");element.setAttribute("rel","stylesheet");element.setAttribute("href",(cache?uri:uri+"?"+new Date().getTime()))}if(element){head.appendChild(element)}if(bootGroup.type=="js"){isScriptLoaded(uri,test)}if(bootGroup.type=="css"){isStyleLoaded(uri,test)}}}catch(err){Bootstrap.log(err)}};var getAltIEScriptConfig=function(script){var config={ieUri:null,ieTest:null};if(typeof script.ieUri!=="undefined"&&_isIE){if(typeof script.ieVersion!=="undefined"){if(script.ieVersion=="6"&&_isIE6){config.ieUri=script.ieUri}if(script.ieVersion=="7"&&_isIE7){config.ieUri=script.ieUri}if(script.ieVersion=="8"&&_isIE8){config.ieUri=script.ieUri}if(script.ieVersion=="9"&&_isIE9){config.ieUri=script.ieUri}if(script.ieVersion=="9m"&&_isIE9m){config.ieUri=script.ieUri}if(script.ieVersion=="10"&&_isIE10){config.ieUri=script.ieUri}}else{config.ieUri=script.ieUri}}if(typeof script.ieTest!=="undefined"&&_isIE){if(typeof script.ieVersion!=="undefined"){if(script.ieVersion=="6"&&_isIE6){config.ieTest=script.ieTest}if(script.ieVersion=="7"&&_isIE7){config.ieTest=script.ieTest}if(script.ieVersion=="8"&&_isIE8){config.ieTest=script.ieTest}if(script.ieVersion=="9"&&_isIE9){config.ieTest=script.ieTest}if(script.ieVersion=="9m"&&_isIE9m){config.ieTest=script.ieTest}if(script.ieVersion=="10"&&_isIE10){config.ieTest=script.ieTest}}else{config.ieTest=script.ieTest}}return config};var fetchBootGroup=function(name){var bootGroups=_bootstrap.bootGroups;var selectedBootGroup=null;for(var i=0;i<bootGroups.length;i++){if(bootGroups[i].name==name){selectedBootGroup=bootGroups[i];break}}if(selectedBootGroup==null){throw"Error loading boot group."}return selectedBootGroup};var isScriptLoaded=function(script,test){var namespaces=test.split(".");if((namespaces.length>1?(typeof(window[namespaces[0]])=="undefined"?false:true):true)&&(eval("typeof "+test)=="undefined"?false:true)){scriptLoaded(script)}else{window.setTimeout(function(){isScriptLoaded(script,test)},50)}};var isStyleLoaded=function(script,test){var sheets=document.styleSheets;var rules={};for(var i=0,len=sheets.length;i<len;i++){try{var sheet=sheets[i];var sheetRules=sheet.cssRules||sheet.rules;for(var j=sheetRules.length-1;j>=0;--j){rules[sheetRules[j].selectorText]=sheetRules[j]}}catch(e){}}if(rules[test]){scriptLoaded(script)}else{window.setTimeout(function(){isStyleLoaded(script,test)},50)}};var scriptLoaded=function(script){_loadedScripts[_loadedScripts.length]=script;if(_bootstrap.verbose){Bootstrap.log("     "+script+" loaded.")}if(!Bootstrap.isBootGroupLoaded(_bootstrap.bootOrder[_currentBootSequence])){return}if(_bootstrap.debug){Bootstrap.log(_bootstrap.bootOrder[_currentBootSequence]+" loaded.")}var bootGroup=fetchBootGroup(_bootstrap.bootOrder[_currentBootSequence]);var now=new Date();bootGroup.finishTime=now.getTime();if(bootGroup.callback){eval(bootGroup.callback).call()}_currentBootSequence++;if(_currentBootSequence==_bootstrap.bootOrder.length){_finishTime=now.getTime();if(_bootstrap.debug){Bootstrap.report()}if(_bootstrap.callback){if(typeof _bootstrap.callback=="function"){_bootstrap.callback.call()}if(typeof _bootstrap.callback=="string"){eval(_bootstrap.callback+".call()")}}removeEventHandlers()}else{window.setTimeout(Bootstrap.loadScripts,250)}};var checkLoadedScript=function(script){var scriptLoaded=false;for(var i=0;i<_loadedScripts.length;i++){if(_loadedScripts[i]==script){scriptLoaded=true;break}}return scriptLoaded};var parseTimeStamp=function(date){var hours=date.getHours()<10?"0"+date.getHours():date.getHours();var minutes=date.getMinutes()<10?"0"+date.getMinutes():date.getMinutes();var seconds=date.getSeconds()<10?"0"+date.getSeconds():date.getSeconds();return hours+":"+minutes+":"+seconds+":"+date.getMilliseconds()};var parseUri=function(sourceUri){var uriPartNames=["source","protocol","authority","domain","port","path","directoryPath","fileName","query","anchor"];var uriParts=new RegExp("^(?:([^:/?#.]+):)?(?://)?(([^:/?#]*)(?::(\\d*))?)?((/(?:[^?#](?![^?#/]*\\.[^?#/.]+(?:[\\?#]|$)))*/?)?([^?#/]*))?(?:\\?([^#]*))?(?:#(.*))?").exec(sourceUri);var uri={};for(var i=0;i<10;i++){uri[uriPartNames[i]]=(uriParts[i]?uriParts[i]:"")}if(uri.directoryPath.length>0){uri.directoryPath=uri.directoryPath.replace(/\/?$/,"/")}return uri};var parseBootstrapFile=function(){var bootstrap=null;var uri=parseUri(window.location);if(uri.query==null||uri.query==""){return bootstrap}var query=unescape(uri.query);var params=query.split("&");for(var i=0;i<params.length;i++){var param=params[i].split("=");if(param[0]=="bootstrap"){bootstrap=typeof param[1]=="undefined"||param[1]==""?null:param[1];break}}return bootstrap};return{run:function(){var now=new Date();_startTime=now.getTime();var bootstrap=parseBootstrapFile();if(bootstrap==null){bootstrap="bootstrap.txt"}loadBootstrap(bootstrap)},log:function(message){if(typeof(console)!="undefined"){var timestamp=parseTimeStamp(new Date());console.log(timestamp+" - "+message)}},getAnimTarget:function(){return _animTarget},getBootstrap:function(){return _bootstrap},setSplashMessage:function(message,append){var splashMessage=document.getElementById("splash-message");if(splashMessage!=null){if((typeof append!="undefined")&&(append==true)){splashMessage.innerHTML=splashMessage.innerHTML+message}else{splashMessage.innerHTML=message}}},isSplashShowing:function(){return(_splashDiv.style.visibility=="visible")},showSplash:function(hideLoader){_splashDiv.style.visibility="visible";if((typeof(hideLoader)!="undefined")&&hideLoader){_loaderDiv.style.visibility="hidden"}else{_loaderDiv.style.visibility="visible"}},hideSplash:function(){_splashDiv.style.visibility="hidden";_loaderDiv.style.visibility="hidden"},setCopyrightMessage:function(message){var copyrighthMessage=document.getElementById("copyright-message");if(copyrighthMessage!=null){copyrighthMessage.innerHTML=message}},loadScripts:function(){if(!_bootstrap.bootOrder||_bootstrap.bootOrder.length<1){alert("Please provide a boot order for scripts.");return}try{loadBootGroup(_bootstrap.bootOrder[_currentBootSequence])}catch(e){alert(e)}},setCallback:function(callback){_bootstrap.callback=callback},addToBootOrder:function(name){_bootstrap.bootOrder.push(name)},isBootGroupLoaded:function(name){var bootGroup=fetchBootGroup(name);var scriptsLoaded=0;for(var i=0;i<bootGroup.files.length;i++){var script=bootGroup.files[i];var altIEScriptConfig=getAltIEScriptConfig(script);var uri=altIEScriptConfig.ieUri==null?script.uri:altIEScriptConfig.ieUri;if(checkLoadedScript(uri)){scriptsLoaded++}}return(bootGroup.files.length==scriptsLoaded)},report:function(){var msPerSecond=60*1000;var loadTime=(_finishTime-_startTime)/msPerSecond;Bootstrap.log("Load time: "+loadTime+" seconds");for(var i=0;i<_bootstrap.bootOrder.length;i++){var bootGroup=fetchBootGroup(_bootstrap.bootOrder[i]);var bootGroupLoadTime=(bootGroup.finishTime-bootGroup.startTime)/msPerSecond;Bootstrap.log("\t\t"+bootGroup.name+" load time: "+bootGroupLoadTime+" seconds")}}}}();window.onload=Bootstrap.run;